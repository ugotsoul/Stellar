<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Test Game</title>
	<link rel="stylesheet" href="style.css">
	<script src="jquery.min.js"></script>
</head>
<body>
	
<canvas id="canvas" height="700" width="1800">
Oops, your browser does not support Html5 canvas. Dang.
</canvas>

<div id="status">
	This is a game about stars and stuff.
</div>

<script>

	$(document).ready( function(){
		
		getElements();

		drawElements();

		//mousePosition();

		keyPosition();

		});

var canvas = document.getElementById("canvas");
var	ctx = canvas.getContext('2d');

//constructor functions//

//instanciate an array of objects javascript
p = 1;
e = 2;

//creates an array of length player + enemy objects
var gameElements = new Array();


//get random integer
function getRandomInteger(min, max) {
	return Math.floor(Math.random() * (max - min + 1)) + min;
}

//add game objects
function getElements() {
	//add p# of p to game element array
	for (var a = 0; a < (p); a++) {
		gameElements.push(new Player());
	}

	//add e# of enemy to game element array
	for (var b = 0; b < (e); b++) {

		// instanciate enemies in random places on the board

		// generate a random integer for x & y
		var rx = getRandomInteger(75, 1700);
		var ry = getRandomInteger(75, 600);
		gameElements.push(new Enemy(rx, ry));
	}
}

// ###############################
//  Get player position with Mouse
// ###############################

// function mousePosition() {

// 	//mouseEvent listener
// 	$("#canvas").click(function (evt) {
	
// 	//store mouse clicks
// 	for (var d = 0; d < gameElements.length; d++) {
// 		if (gameElements[a] instanceof Player === true) {
// 			gameElements[a].x = evt.clientX - 40;
// 			gameElements[a].y = evt.clientY - 40;

// 			updateBoard();

// 			console.log(gameElements[a].x);
// 			console.log(gameElements[a].y);
// 		}
// 	}


// 	});
// }

function keyPosition() {

	// event listener for keys
	$(window).keypress(function(evt) {

		console.log(evt.keyCode);
		
		//log key movements
		for (var e = 0; e < gameElements.length; e++){

			//problem: I have more than 1 enemy with the same attributes. HOW DO I FIX for multiple enemies. Do I need to randomly generate x/y cordinates constrained by the board size?
			if (gameElements[e] instanceof Enemy === true) {

				if (evt.keyCode === 40) {
					// + y
					gameElements[e].y-=10; 
					$('#status').html("You moved down by 10 pixels");
					console.log("You moved down by 10 pixels"); 
					}

				else if (evt.keyCode === 38) {
					// - y

					gameElements[e].y+=10;
					$('#status').html("You moved up by 10 pixels");
					console.log("You moved up by 10 pixels");
					}

				else if (evt.keyCode === 37) {
					// + x
					gameElements[e].x+=10; 
					$('#status').html("You moved left by 10 pixels");
					console.log("You moved left by 10 pixels");
					}

				else if (evt.keyCode === 39) {
					// - x
					gameElements[e].x-=10;
					$('#status').html("You moved right by 10 pixels");
					console.log("You moved right by 10 pixels");
 
					}
				}
				updateBoard();
			}
		});
}


//draw game elements on canvas
function drawElements() {
	// itterate through the array of objects
	for (var c =0; c < gameElements.length; c++) {
		//draw element on canvas
		gameElements[c].update();
	}
}


function updateBoard() {

	//clear board
	//console.log("Clearing Board");
	ctx.clearRect(0,0,canvas.width,canvas.height);

	//redraw objects
	//console.log("Redrawing Board");
	//getElements();
	drawElements();


}

// game state object where your player is, where your enemies are

function Player(x, y, w, h, fill) {

	//player attributes
	this.x = x || 900;
	this.y = y || 500;
	this.w = w || 75;
	this.h = h || 75;
	this.fill = fill || "red";

	//draw player method
	this.update = function() {
		ctx.fillStyle = this.fill;
		ctx.fillRect(this.x, this.y, this.w, this.h); 
	}

}

function Enemy(x, y, r, fill) {

	//enemy attributes
	this.x = x || 1400;
	this.y = y || 200;
	this.r = r || 75;
	this.fill = fill || "blue"; 

	//draw enemy method
	this.update = function() {
		ctx.fillStyle = this.fill;
		ctx.beginPath();
		ctx.arc(this.x, this.y, this.r, 0, Math.PI*2, false);
		ctx.closePath();
		ctx.fill();
	}

}


// make it so arrow keys do player movement 

// put the player in the dead center of the box

//player 

//console log I've moved this far

//redaw canvas

//paralax effect



</script>
</body>
</html>